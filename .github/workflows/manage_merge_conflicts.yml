---
name: Manage Merge Conflicts

on:
  pull_request:
    types:
      - opened
      - reopened
      - synchronize
      - ready_for_review

permissions:
  pull-requests: write
  contents: read

jobs:
  merge-conflict:
    name: Manage merge conflicts
    runs-on: ubuntu-latest

    steps:
      - name: Label pull request based on merge state
        uses: eps1lon/actions-label-merge-conflict@v3.0.3
        with:
          dirtyLabel: |
            PR: please resolve merge conflict

          commentOnDirty: |
            ## âš ï¸ Merge conflicts detected

            This pull request currently has merge conflicts that need to be resolved
            before we can continue with the review.

            ### ğŸ”§ How to fix this

            - Rebase or merge the target branch into your branch
            - Resolve the conflicts locally
            - Push the updated commits to this PR

            â³ As soon as the conflicts are resolved, weâ€™ll automatically continue.

            Thanks for taking care of this! ğŸš€

          removeOnDirtyLabel: |
            PR: needs review

          commentOnClean: |
            ## âœ… Ready for review

            The merge conflicts in this pull request have been resolved. ğŸ‰

            The PR is now ready for review by a maintainer.
            If thereâ€™s any additional context worth sharing, feel free to leave a comment.

            Thanks for keeping things moving! ğŸ™Œ

          repoToken: ${{ secrets.GITHUB_TOKEN }}
