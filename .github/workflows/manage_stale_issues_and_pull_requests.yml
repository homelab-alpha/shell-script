---
name: Manage Stale Issues and Pull Requests

on:
  schedule:
    - cron: 00 03 * * *

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Manage issues and pull requests
    runs-on: ubuntu-latest

    steps:
      - name: Manage stale issues
        uses: actions/stale@v10.1.1

        with:
          stale-issue-message: |
            ## ğŸ‘‹ Just checking in

            This issue has been inactive for a little while, so weâ€™re giving it a gentle
            nudge. ğŸ•’ We periodically clean up older issues to keep the project healthy and
            focused.

            ### âœ… What you can do

            - Leave a comment if this issue is still relevant
            - Share any new information or updates
            - Remove the `stale` label if work is actively ongoing (maintainers only)

            â³ If thereâ€™s no activity within the next **3 days**, this issue will be closed
            automatically.

            Thanks for your understanding â€” and for being part of the project! ğŸ™Œ

          close-issue-message: |
            ## âŒ Issue closed due to inactivity

            Since there has been no recent activity on this issue, weâ€™re going to close it
            for now. This helps us keep the issue tracker focused and manageable. ğŸ§¹

            ğŸ’¡ **Still relevant?** If this issue is still affecting you, feel free to reopen
            it or leave a comment with any new information, updates, or context.

            Thanks for your understanding â€” and for helping keep the project in great shape! ğŸ™Œ

          days-before-stale: 14
          days-before-close: 3
          stale-issue-label: stale

          exempt-issue-labels: |
            bug
            discussion
            discussion required
            documentation
            P0: critical
            P1: high
            P2: moderate
            cannot reproduce
            in progress
            under development
            security
            security vulnerability
            releaseblocker

          exempt-issue-assignees: |
            homelab-alpha

          operations-per-run: 250

      - name: Manage stale pull requests
        uses: actions/stale@v10.1.1

        with:
          stale-pr-message: |
            ## ğŸ‘‹ Friendly reminder

            This pull request hasnâ€™t seen activity in a while. No worries â€” we just want to
            check whether itâ€™s still in progress. ğŸ˜Š

            ### ğŸ”„ If youâ€™re still working on this PR

            - Push new commits, or
            - Leave a comment with a quick status update

            â³ If thereâ€™s no activity within **3 days**, weâ€™ll close this PR to keep the
            list tidy.

            Thanks again for your contribution â€” we appreciate the effort! ğŸš€

          close-pr-message: |
            ## âŒ Pull request closed

            This pull request has been closed due to inactivity.

            If youâ€™d like to continue working on this change, feel free to reopen the PR or
            open a new one when youâ€™re ready.

            Thanks for taking the time to contribute â€” we hope to see you again! ğŸ™Œ

          days-before-pr-stale: 28
          days-before-pr-close: 3
          stale-pr-label: stale

          exempt-pr-assignees: |
            homelab-alpha

          exempt-pr-labels: |
            in progress
            under development
            security
            security vulnerability
            releaseblocker

          operations-per-run: 250

      - name: Manage unreproducible issues
        uses: actions/stale@v10.1.1

        with:
          stale-issue-message: |
            ## âš ï¸ Help needed to move forward

            This issue has been marked as **`cannot reproduce`**. At the moment, we donâ€™t
            have enough information to reliably reproduce the problem.

            ### ğŸ§© How you can help

            - Share updated or more detailed steps to reproduce
            - Include logs, screenshots, or environment details
            - Mention anything that might differ from a standard setup

            â³ If no new information is provided within **3 days**, this issue will be
            closed.

            Thanks for your patience and for helping us investigate! ğŸ”

          close-issue-message: |
            ## âŒ Issue closed

            Weâ€™re closing this issue because we werenâ€™t able to reproduce the reported
            problem.

            ğŸ’¡ If you or anyone else can reliably reproduce the issue, feel free to reopen
            it with clear steps and relevant details.

            Thanks for taking the time to report it â€” your feedback is always appreciated! ğŸ™Œ

          days-before-stale: 7
          days-before-close: 3

          any-of-issue-labels: |
            cannot reproduce

          operations-per-run: 250
